* 自分で考えてみる

2^K

優勝確率をもとめる…。

K は多くとも 10 なので 1024人が参加する。
10回対戦すれば優勝が決まる。

K = 1 のときが優勝する確率は P(A, B) でわかる。
K = 2 のときは
1回線突破は P(A, B)
2回線突破は P(C, D) * P(A, C) + P(D, C) * P(A, D)
なのでこれを掛け合わせて

P(A, B) * (
  P(C, D) * P(A, C) +
  P(D, C) * P(A, D)
)

となる。さらに K = 3 のときは…と考えると

事前に全ての組み合わせで P(i,j) を計算しておくと 1024 * 1024 くらいは必要。
その上で、掛けたり足したりする必要がある。

P1 = 0step
P2 = 3step

うーんわからん、計算量も謎だ。解説がない…。
とりあえず表を作ってみようか。

| i\j       |   1 |   2 |   3 |   4 | ... | 1024 |
|-----------+-----+-----+-----+-----+-----+------|
| 1回戦突破 | 1/3 | 2/3 | 3/4 | 1/4 | ... |      |
| 2回戦突破 |     |     |     |     |     |      |
|           |     |     |     |     |     |      |

i = 0 かつ j が奇数のときは確率を下記で計算できる

1 - @table[0][j-1]

** i = 1, j = 0 を考えてみると

1回戦突破 * 2試合目勝利
@table[0][0] * (@table[0][2] * P(0, 2) + @table[0][3] * P(0, 3))

** i = 2, j = 0 を考えてみると

2回戦突破 * 3試合目勝利
@table[1][0] * (
  @table[1][4] * P(0,4) +
  @table[1][5] * P(0,5) +
  @table[1][6] * P(0,6) +
  @table[1][7] * P(0,7)
)

** i, j 一般化して考えてみると

@table[i - 1][j] * (

  @table[i - 1][k] * P(j, k)
)
