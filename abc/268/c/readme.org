* 失敗例

1-N回テーブルを回転させて、人数 N がそれぞれ求めていた料理に的中するかを調べる場合は O(N^2)になる。
この方法では実行時間の制約違反となり失敗する。

* 模範解答

事前に回転数と的中数のテーブルを用意する。

|  0 |  1 |  2 |  3 |  4 | ... | N-1  |
|----+----+----+----+----+-----+------|
| c0 | c1 | c2 | c3 | c4 | ... | cN-1 |

この表の c0, c1, ... を埋めるO(N)の方法を説明する。

料理 i が人 j の前に配置されているとする。
これを適切な場所に届けるにはそれぞれ

(P[i] - j - 1) % N 回
(P[i] - j)     % N 回
(P[i] - j + 1) % N 回

の回転が必要である。

たとえば 2,3,4 回転だったとしよう。
ここでテーブルに戻り、上記回転数に対して料理 i は的中するので

| 0 | 1 | 2 | 3 | 4 | ... | N-1 |
|---+---+---+---+---+-----+-----|
| 0 | 0 | 1 | 1 | 1 | ... |   0 |

のようにして件数を記録する。
こうして料理 0 ... N-1 が届く回転数を計算すれば O(N) で答えが求められる。
