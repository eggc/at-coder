* これグラフじゃん！

* 例

1 赤----------------青
2 赤----------------青
3 赤----------------青
.
.
.
N 赤----------------青

操作i

ロープ1 R とロープ2 B をむすぶ

1 青----------------結----------------赤

という感じ.
これは再帰処理ができそうな気がする
操作が終わった時は、輪と線しかありえない。

* 案

すべての紐に右と左を持たせる

0 [1R,1B]
1 [2R,2B]

...

N [NR,NB]

ステップ k にて紐 1R, 2B が合体するとき

0 [k,1B]
1 [2R,k]

という感じで繋ぐことはできるのでは
グループ管理が難しいな。

* ハッシュの方が早く探索できるのでは

** 最初は全部孤立している

1 -> [1R,1B]
2 -> [2R,2B]

...

N -> [NR,NB]

** 結ばれた時

同じオブジェクトへの参照を持たせてみる

1 -> [2R, 1B]
2 -> [2R, 1B]

...

N -> [NR,NB]

** 輪になった時

1 -> ["X", "X"]

** 赤と赤が結ばれた時


1 -> [1B, 2B]
2 -> [1B, 2B]

** 最後検査する時

values の hash をしらべて unique にする。
そして輪になっているなら 潰れて消えているはずだ。
