https://atcoder.jp/contests/abs/tasks/abc085_c

# 問題文
日本でよく使われる紙幣は、10000 円札、5000 円札、1000 円札です。以下、「お札」とはこれらのみを指します。

青橋くんが言うには、彼が祖父から受け取ったお年玉袋にはお札が N 枚入っていて、合計で Y 円だったそうですが、嘘かもしれません。
このような状況がありうるか判定し、ありうる場合はお年玉袋の中身の候補を一つ見つけてください。
なお、彼の祖父は十分裕福であり、お年玉袋は十分大きかったものとします。

# 案
各お札が N 枚あると仮定した上で線形探索すればよさそう。探索しなくていいものもあるけど N^3 の計算ならそれほど遅くはない気がする。しかしこの方法では実行時間2秒の制限を満たせなかった。

break を細かく入れていってもよいかもしれないが頑張っても効果は 1/3 程度にしかならない気がする。線形探索は諦めたほうがよさそう。

# 案2

動的計画法が使えそうな気がしてきた。表としては 1step 前の金額, 追加する金額の2軸のテーブルをイメージ。

|      | 1000 | 5000  | 10000 |
|------|------|-------|-------|
| 0    | 1000 | 5000  | 10000 |
| 1000 | 2000 | 6000  | 11000 |
| 2000 | ...  | ...   | ...   |
| ...  | ...  | ...   | ...   |
| 5000 | 6000 | 10000 | 15000 |

こんな感じで探索ができる。表が完成したら、Y と一致するセルを見つけてそこから逆算していく。というのはどうだろう。メモリ節約のために 1/1000 スケールで計算してみる。


|     | 1   | 5   | 10  |
|-----|-----|-----|-----|
| 0   | 1   | 5   | 10  |
| 1   | 2   | 6   | 11  |
| 2   | ... | ... | ... |
| ... | ... | ... | ... |
| 5   | 6   | 10  | 15  |

ただ金額一致しているからといって N 枚のお札を使うかわからないのでそこが難しい。

# 案3

コインの問題と同じように樹形図で探索してみるのはどうだろう。
3^1000 になってよくない。

# 案4

x,y,z 枚の紙幣があるとする。
x + y + z = N となる組み合わせは下のようになる。

(N,0,0)
(N-1,1,0)
(N-1,0,1)
(N-2,2,0)
(N-2,0,2)
(N-2,1,1)
(N-3,3,0)
(N-3,2,1)
(N-3,1,2)
(N-3,0,3)
...

最初に x の選びかたが N 通り。
それに対して y の選び方が N-k 通り。(k は x によって決定する)
z は選択できない x,y が決まっている時選択できない。
そういう考えで行ってみよう。とけた・・・。

# 解説

10^8 (1億)回の計算は約1秒で終わるという風に覚えておくと良い。
